# PT - Portfolio Tracking

‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô‡∏´‡∏∏‡πâ‡∏ô, TFEX ‡πÅ‡∏•‡∏∞ Cryptocurrency ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô real-time

## ‚ú® Features (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏´‡∏•‡∏±‡∏Å)

### üìà Portfolio Management (‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÇ‡∏ü‡∏•‡∏¥‡πÇ‡∏≠)
- **Multi-Asset Support**: Track Cryptocurrency, Thai Stocks (SET), and TFEX in a single place.
  - *‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢*: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á Crypto, ‡∏´‡∏∏‡πâ‡∏ô‡πÑ‡∏ó‡∏¢ ‡πÅ‡∏•‡∏∞ TFEX ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- **Real-time Valuation**: Automatic price updates from CoinGecko and Settrade.
  - *‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå*: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å CoinGecko ‡πÅ‡∏•‡∏∞ Settrade
- **Multi-Currency Display**: View your portfolio value in THB, USD, or BTC.
  - *‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏á‡∏¥‡∏ô*: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ THB, USD ‡∏´‡∏£‡∏∑‡∏≠ BTC ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

### üìä Analysis & Performance (‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô)
- **Interactive Dashboard**: Visual overview of Net Worth, Daily P&L, and asset allocation.
  - *‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞*: ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô ‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô
- **Profit & Loss Tracking**: Detailed breakdown of Unrealized and Realized Gains.
  - *‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≥‡πÑ‡∏£/‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô*: ‡πÅ‡∏¢‡∏Å‡∏î‡∏π Unrealized (‡∏ñ‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà) ‡πÅ‡∏•‡∏∞ Realized (‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß) ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- **Monthly Performance**: Calendar view of your trading performance month-by-month.
  - *‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô*: ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- **Asset Breakdown**: Drill-down view into specific asset classes and individual holdings.
  - *‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå*: ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß

### üìù Transaction System (‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°)
- **Complete History**: Record Buy, Sell, Deposit, and Withdrawal transactions.
  - *‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô*: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ ‡∏ã‡∏∑‡πâ‡∏≠, ‡∏Ç‡∏≤‡∏¢, ‡∏ù‡∏≤‡∏Å, ‡∏ñ‡∏≠‡∏ô
- **Bulk Import**: Easily import past transactions via CSV or JSON.
  - *‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•*: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Import ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡∏£‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å
- **Cost Basis Calculation**: Automatic handling of average cost (AVG Price).
  - *‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô*: ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### üîí Security & System (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö)
- **Self-Hosted**: You own your data. Powered by PocketBase and Docker.
  - *‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•*: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô PocketBase
- **OAuth Integration**: Secure login support (e.g., via PocketID).
  - *‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö OAuth*: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÑ‡∏î‡πâ

## üõ† Tech Stack

- **Frontend**: Next.js 16 + React + TypeScript + Tailwind CSS
- **Backend**: Rust + Axum
- **Database**: PocketBase

## üìÅ Project Structure

```
portfolio-tracking/
‚îú‚îÄ‚îÄ backend/                # Rust API Server
‚îÇ   ‚îú‚îÄ‚îÄ Cargo.toml
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ main.rs
‚îÇ       ‚îú‚îÄ‚îÄ handlers/       # API handlers
‚îÇ       ‚îú‚îÄ‚îÄ models/         # Data models
‚îÇ       ‚îî‚îÄ‚îÄ services/       # Business logic
‚îú‚îÄ‚îÄ frontend/               # Next.js Frontend
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ app/           # Pages
‚îÇ       ‚îú‚îÄ‚îÄ components/    # React components
‚îÇ       ‚îú‚îÄ‚îÄ lib/           # API client
‚îÇ       ‚îî‚îÄ‚îÄ types/         # TypeScript types
‚îî‚îÄ‚îÄ pocketbase/            # PocketBase data (optional)
```

## üöÄ Getting Started

### Prerequisites

- [Rust](https://rustup.rs/) (1.70+)
- [Node.js](https://nodejs.org/) (18+)
- [PocketBase](https://pocketbase.io/) (optional - ‡πÉ‡∏ä‡πâ in-memory storage ‡πÑ‡∏î‡πâ)

## üöÄ Getting Started

### Prerequisites

- [Docker](https://www.docker.com/) (Required for recommended setup)
- [Node.js](https://nodejs.org/) (18+) & [Rust](https://rustup.rs/) (Only for local development)

### 1. Quick Start (Docker Compose) - Recommended

The easiest way to run the application is using Docker Compose.

1. **Clone the repository**:
   ```bash
   git clone <repository-url>
   cd portfolio-tracking
   ```

2. **Configure Environment**:
   Copy the sample environment file and edit it with your settings.
   ```bash
   cp .env.sample .env
   # Edit .env with your favorite editor
   # nano .env
   ```
   *Make sure to set `POCKETBASE_ADMIN_PASSWORD` and other secrets.*

3. **Start the Stack**:
   ```bash
   docker compose up -d
   ```

4. **Create Superuser (First Time Only)**:
   Check the logs to confirm the service is running and find the Admin UI URL.
   ```bash
   docker compose logs -f pocketbase
   ```
   > Look for: `Admin UI: http://0.0.0.0:8090/_/`
   
   Open http://localhost:8090/_/ in your browser. You will be prompted to create the first admin account (email/password).
   *Note: Use these credentials to set `POCKETBASE_ADMIN_EMAIL` and `POCKETBASE_ADMIN_PASSWORD` in your `.env` for the backend to connect.*

5. **Access the App**:
   - **Frontend**: http://localhost:3000 (or your configured `FRONTEND_PORT`)
   - **Backend**: http://localhost:3001 (or your configured `BACKEND_PORT`)
   - **PocketBase Admin**: http://localhost:8090/_/

### 2. Manual Setup (Local Development)

If you want to run services individually without Docker (except PocketBase which is recommended to run separately or via the binary).

#### Backend
1. `cd backend`
2. `cp .env.example .env` (Adjust as needed)
3. `cargo run`

#### Frontend
1. `cd frontend`
2. `npm install`
3. `npm run dev`

---

## üîß Environment Variables (.env)

The application is configured utilizing a single root `.env` file when running with Docker Compose.

See `.env.sample` for all available options. Key configurations include:

### General
- `FRONTEND_PORT`: Port for the Next.js frontend (default: `3000`)
- `BACKEND_PORT`: Port for the Rust backend (default: `3001`)

### PocketBase
- `POCKETBASE_ADMIN_EMAIL`: Admin email for backend connection
- `POCKETBASE_ADMIN_PASSWORD`: Admin password for backend connection

### APIs
- `COINGECKO_API_URL`: URL for Crypto prices
- `SETTRADE_API_URL`: URL for Thai Stock prices (if available)

### Security
- `JWT_SECRET`: Secret key for signing tokens
- `OAUTH_*`: Configuration for OAuth providers (e.g. PocketID)

## üìä Supported Assets

### Crypto (via CoinGecko)
- BTC, ETH, BNB, SOL, XRP, ADA, DOGE, DOT, MATIC, AVAX...

### Thai Stocks (Mock - Settrade API pending)
- PTT, ADVANC, CPALL, AOT, KBANK, SCB, GULF, DELTA, BTS, TRUE...

### TFEX
- S50, S50H25...

## üìù License

MIT

## üê≥ Docker Distribution (For Developers)

### 1. Build and Publish Images
To share this application with others, you can build and push Docker images to Docker Hub (or GHCR).
We include a script that uses `docker buildx` to build for both AMD64 (Linux servers) and ARM64 (Mac M1/M2).

```bash
# Login to Docker Hub first
docker login

# Run the publish script (default user: padetta)
./scripts/publish-docker.sh YOUR_DOCKERHUB_USERNAME
```

### 2. How Others Can Run It
Give them the `docker-compose.prod.yml` file and tell them to run:

```bash
# Set the username environment variable (optional if defaults match)
export DOCKER_USER=YOUR_DOCKERHUB_USERNAME

# Start the stack using pre-built images
docker compose -f docker-compose.prod.yml up -d
```

This will download the images from Docker Hub and start the app without needing to build source code.
